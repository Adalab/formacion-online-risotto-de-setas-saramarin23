{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\n// app.use(\"/css\", express.static(__dirname + \"/node_modules/bootstrap/dist/css\")); // redirect CSS bootstrap\n\nlet title = document.querySelector(\".recipe-title\");\nconst data = \"../../service/data.json\";\nlet shipping = 7;\n\nlet select = document.getElementsByClassName(\"select\")[0];\n// console.log(select);\nlet unselect = document.getElementsByClassName(\"unselect\")[0];\n\nfunction fetchData(e) {\n  e.preventDefault();\n  const shippingCost = document.querySelector(\".shipping-costs\");\n  fetch(data)\n    .then(response => response.json())\n    .then(data => {\n      title.innerHTML = data.name;\n      let products = document.querySelector(\".products-list\");\n      let items = document.querySelector(\".total-items\");\n      let subtotal = document.querySelector(\".subtotal\");\n      //   let shippingCost = document.querySelector(\".shipping-costs\");\n      let total = document.querySelector(\".total\");\n      let buy = document.querySelector(\".buy-btn\");\n\n      let ingredientItem = \"\";\n      for (const ingredient of data.ingredients) {\n        let productPrice = ingredient.price * ingredient.items;\n        ingredientItem += `<li class=\"list-group-item list-item\">\n        <input class=\"form-check-input position-static checkbox\" type=\"checkbox\" checked>\n        </input>\n        <input type=\"number\" class=\"input-quantity quantity\" value=${\n          ingredient.items\n        } min=\"1\"></input>\n        <div class=\"ingredient-container\">\n            <p class=\"product\">${ingredient.product}</p>\n            <p class=\"product-brand\">${ingredient.brand || \"Sin marca\"} </p>\n            <span class=\"product-quantity\">${ingredient.quantity}</span>\n        </div>\n        <p class=\"product-price\">${productPrice}</p></li>`;\n      }\n      products.innerHTML = ingredientItem;\n      //   subtotal.innerHTML;\n      shippingCost.innerHTML += `<p> ${shipping} ${data.currency}</p>`;\n      // total.innerHTML += `<p>${shippingCost.lastElementChild.innerHTML}</p>`;\n      buy.innerHTML += shipping + data.currency;\n\n      addQuantity();\n      selectAllListener();\n    });\n}\n\nwindow.addEventListener(\"load\", fetchData);\n\nfunction selectAllListener() {\n  let checkboxes = document.querySelectorAll(\".checkbox\");\n  for (let i = 0; checkboxes.length; i++) {\n    console.log(checkboxes[i]);\n    checkboxes[i].checked = 1;\n  }\n}\n\nfunction unselectAllListener() {\n  let checkboxes = document.querySelectorAll(\".checkbox\");\n  for (let i = 0; checkboxes.length; i++) {\n    checkboxes[i].checked = 0;\n  }\n}\n\nfunction selectAllHandler(e) {\n  console.log(e);\n}\n\nselect.addEventListener(\"click\", selectAllListener);\nunselect.addEventListener(\"click\", unselectAllListener);\n\nfunction addQuantity() {\n  const allNumberInputs = document.querySelectorAll(\".quantity\");\n  allNumberInputs.forEach(numberInput =>\n    numberInput.addEventListener(\"change\", getPrice)\n  );\n}\n\nfunction getPrice(e) {\n  e.preventDefault();\n  const thisPrice = event.srcElement.parentNode.lastChild.innerHTML;\n  const quantity = parseInt(event.target.value);\n  let priceItem = (parseFloat(thisPrice) * quantity).toFixed(2); //Lo deja en 2 decimales siempre\n  console.log(quantity);\n\n  let list = event.target.parentNode;\n  let ingredientTotalPrice = \"\";\n  ingredientTotalPrice += `<div><p>${priceItem}â‚¬</p></div>`;\n  console.log(ingredientTotalPrice);\n  list.innerHTML += ingredientTotalPrice;\n  // fetchData();\n}\n"]}